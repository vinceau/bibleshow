<html>
<head>
    <link rel="stylesheet" type="text/css" href="static/styles.css">
</head>
<body>
    <div id="controls">
        <button id="fullButton" onclick="toggleFullscreen()">Fullscreen</button>
        <button id="prevButton" onclick="prev()">Prev</button>
        <button id="nextButton" onclick="next()">Next</button>
    </div>
    <div id="header">
        John 3
    </div>
    <div id="content">
        <div id="text_body"><b>3:1</b> Now a certain man, a Pharisee named Nicodemus, who was a member of the Jewish ruling council, <b>2</b> came to Jesus at night and said to him, "Rabbi, we know that you are a teacher who has come from God. For no one could perform the miraculous signs that you do unless God is with him." <b>3</b> Jesus replied, "I tell you the solemn truth, unless a person is born from above, he cannot see the kingdom of God." <b>4</b> Nicodemus said to him, "How can a man be born when he is old? He cannot enter his mother's womb and be born a second time, can he?" <b>5</b> Jesus answered, "I tell you the solemn truth, unless a person is born of water and spirit, he cannot enter the kingdom of God. <b>6</b> What is born of the flesh is flesh, and what is born of the Spirit is spirit. <b>7</b> Do not be amazed that I said to you, 'You must all be born from above.' <b>8</b> The wind blows wherever it will, and you hear the sound it makes, but do not know where it comes from and where it is going. So it is with everyone who is born of the Spirit." <b>9</b> Nicodemus replied, "How can these things be?" <b>10</b> Jesus answered, "Are you the teacher of Israel and yet you don't understand these things? <b>11</b> I tell you the solemn truth, we speak about what we know and testify about what we have seen, but you people do not accept our testimony. <b>12</b> If I have told you people about earthly things and you don't believe, how will you believe if I tell you about heavenly things? <b>13</b> No one has ascended into heaven except the one who descended from heaven &#8211; the Son of Man. <b>14</b> Just as Moses lifted up the serpent in the wilderness, so must the Son of Man be lifted up, <b>15</b> so that everyone who believes in him may have eternal life." <b>16</b> For this is the way God loved the world: He gave his one and only Son, so that everyone who believes in him will not perish but have eternal life. <b>17</b> For God did not send his Son into the world to condemn the world, but that the world should be saved through him. <b>18</b> The one who believes in him is not condemned. The one who does not believe has been condemned already, because he has not believed in the name of the one and only Son of God. <b>19</b> Now this is the basis for judging: that the light has come into the world and people loved the darkness rather than the light, because their deeds were evil. <b>20</b> For everyone who does evil deeds hates the light and does not come to the light, so that their deeds will not be exposed. <b>21</b> But the one who practices the truth comes to the light, so that it may be plainly evident that his deeds have been done in God. <b>22</b> After this, Jesus and his disciples came into Judean territory, and there he spent time with them and was baptizing. <b>23</b> John was also baptizing at Aenon near Salim, because water was plentiful there, and people were coming to him and being baptized. <b>24</b> (For John had not yet been thrown into prison.) <b>25</b> Now a dispute came about between some of John's disciples and a certain Jew concerning ceremonial washing. <b>26</b> So they came to John and said to him, "Rabbi, the one who was with you on the other side of the Jordan River, about whom you testified &#8211; see, he is baptizing, and everyone is flocking to him!" <b>27</b> John replied, "No one can receive anything unless it has been given to him from heaven. <b>28</b> You yourselves can testify that I said, 'I am not the Christ,' but rather, 'I have been sent before him.' <b>29</b> The one who has the bride is the bridegroom. The friend of the bridegroom, who stands by and listens for him, rejoices greatly when he hears the bridegroom's voice. This then is my joy, and it is complete. <b>30</b> He must become more important while I become less important." <b>31</b> The one who comes from above is superior to all. The one who is from the earth belongs to the earth and speaks about earthly things. The one who comes from heaven is superior to all. <b>32</b> He testifies about what he has seen and heard, but no one accepts his testimony. <b>33</b> The one who has accepted his testimony has confirmed clearly that God is truthful. <b>34</b> For the one whom God has sent speaks the words of God, for he does not give the Spirit sparingly. <b>35</b> The Father loves the Son and has placed all things under his authority. <b>36</b> The one who believes in the Son has eternal life. The one who rejects the Son will not see life, but God's wrath remains on him.
        </div>
    </div>
    <script src="static/jquery-2.1.3.min.js"></script>
    <script src="static/scripts.js"></script>
    <script src="static/SplitText.min.js"></script>
    <script src="static/keys.min.js"></script>
    <script>
//declare globals
var max_lines, start, end;
var st = new SplitText("#text_body", {
    type: "lines",
    linesClass: "line++",
});

function set_prev(enabled) {
    $('#prevButton').prop('disabled', !enabled);
}

function set_next(enabled) {
    $('#nextButton').prop('disabled', !enabled);
}

function check() {
    set_prev(start > 1);
    set_next(end < st.lines.length);
}

function next() {
    if (end < st.lines.length) {
        hidelines(start, end);
        start += max_lines;
        end += max_lines;
        showlines(start, end);
        check();
    }
}

function prev() {
    if (start > 1) {
        hidelines(start, end);
        start -= max_lines;
        end -= max_lines;
        showlines(start, end);
        check();
    }
}

function reset() {
    start = 1;
    end = 1;
    st.split();
    for (var i = 1; i <= st.lines.length; i++) {
        var el = $('.line' + i);
        if (!el.is(':offscreen')) {
            continue;
        }
        //i is the first element that's hidden completely
        //subtract the half showing element since it returns visible
        //and subtract one more to specify the last shown line
        end = i - 2;
        break;
    }
    hidelines(end + 1, st.lines.length);
    max_lines = end;
    check();
}

function toggleFullscreen() {
    if (currentlyFullscreen()) {
        exitFullscreen();
        $('#fullButton').html('Fullscreen');
    } else {
        launchIntoFullscreen(document.body);
        $('#fullButton').html('Exit Fullscreen');
    }
    reset();
}

window.Bindings = Keys.Bindings;
window.Combo    = Keys.Combo;
window.Key      = Keys.Key;

// Initialize application-wide bindings manager
window.bindings = new Bindings();

bindings.load({
    nextPage: {
        bind: [
            new Combo(Key.Spacebar),
            new Combo(Key.Right),
            new Combo(Key.Down)
            ],
        handler: next
    },
    prevPage: {
        bind: [
            new Combo(Key.Backspace),
            new Combo(Key.Left),
            new Combo(Key.Up)
            ],
        handler: prev
    }
});

$(window).resize(function() {
    reset();
});

reset();
    </script>
</body>
</html>

